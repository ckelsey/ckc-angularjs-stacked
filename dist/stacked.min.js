"use strict";angular.module("ckc-stacked",["ngModel"]).controller("StackedCtlr",["Utility","StackedS",function(t,e){this.Utility=t,this.StackedS=e}]).service("StackedS",[function(){var t={stacked_columns:[]};return t}]).directive("stacked",["$timeout","$window","StackedS",function(t,e,r){return{restrict:"A",require:"ngModel",controller:"StackedCtlr",controllerAs:"ctlr",templateUrl:function(t,e){return e&&e.hasOwnProperty("stackedTemplateUrl")&&""!==e.stackedTemplateUrl?e.stackedTemplateUrl:"/bower_components/ckc-angularjs-stacked/views/sample_stacked.html"},link:function(t,e,a,s){var n=a.stackedItems,c=[];if(!a.hasOwnProperty("stackedSort")||a.hasOwnProperty("stackedSort")&&""==a.stackedSort)var i="$index";else var i=a.stackedSort;if(!a.hasOwnProperty("stackedSortDirection")||a.hasOwnProperty("stackedSortDirection")&&""==a.stackedSortDirection)var o="desc";else var o=a.stackedSortDirection;if(!a.hasOwnProperty("stackedMinWidth")||a.hasOwnProperty("stackedMinWidth")&&""==a.stackedMinWidth)var d=200;else var d=a.stackedMinWidth;if(!a.hasOwnProperty("stackedMaxWidth")||a.hasOwnProperty("stackedMaxWidth")&&""==a.stackedMaxWidth)var k=400;else var k=a.stackedMaxWidth;if(!a.hasOwnProperty("stackedSmart")||a.hasOwnProperty("stackedSmart")&&""==a.stackedMaxWidth);else{a.stackedSmart}var h=null,l=0,u=function(){return Math.floor(e.width()/((parseInt(k)+parseInt(d))/2))},p=function(t){return"Invalid Date"!==new Date(t)&&!isNaN(new Date(t))},f=function(){var t=[],e=i,r=o;if("object"==typeof n)for(var a in n)t.push(n[a]);else for(var s=0;s<n.length;s++)t.push(n[s]);return"$index"!==e&&t.sort(function(t,a){if(t.hasOwnProperty(e)&&a.hasOwnProperty(e)){var s,n;if(p(t[e])&&p(a[e]))s=new Date(t[e]),n=new Date(a[e]);else if(isNaN(parseInt(t[e]))||isNaN(parseInt(a[e]))){if("string"!=typeof t[e]||"string"!=typeof a[e])return 0;s=t[e].split("")[0],n=a[e].split("")[0]}else s=parseInt(t[e]),n=parseInt(a[e]);return"desc"==r?s>n?1:-1:n>s?1:-1}return 0}),t},w=function(){if(void 0!==n){h=f(),l=u(),c=[];var t=0;0==l&&(l=1);for(var e=0;l>e;e++)c.push([]);for(var a=0;a<h.length;a++)c[t].push(h[a]),t==l-1?t=0:0==t?t++:t++;r.stacked_columns=c;for(var s=document.querySelectorAll(".stacked_column"),i=0;i<s.length;i++)s[i].style.width=100/l+"%"}};a.$observe("stackedItems",function(t){n=JSON.parse(a.stackedItems),w()}),a.$observe("stackedMaxWidth",function(t){k=!a.hasOwnProperty("stackedMaxWidth")||a.hasOwnProperty("stackedMaxWidth")&&""==a.stackedMaxWidth?400:a.stackedMaxWidth,w()}),a.$observe("stackedMinWidth",function(t){d=!a.hasOwnProperty("stackedMinWidth")||a.hasOwnProperty("stackedMinWidth")&&""==a.stackedMinWidth?400:a.stackedMinWidth,w()}),a.$observe("stackedSortDirection",function(t){o=!a.hasOwnProperty("stackedSortDirection")||a.hasOwnProperty("stacked")&&""==a.stackedSortDirection?"desc":a.stackedSortDirection,w()}),a.$observe("stackedSort",function(t){i=!a.hasOwnProperty("stackedSort")||a.hasOwnProperty("stackedSort")&&""==a.stackedSort?400:a.stackedSort,w()});var S,v=function(){w()};window.onresize=function(){clearTimeout(S),S=setTimeout(v,100)},w()}}}]);
//# sourceMappingURL=stacked.min.js.map