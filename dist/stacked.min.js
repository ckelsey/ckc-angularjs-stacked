"use strict";angular.module("ckc-stacked",[]).directive("stacked",["$timeout","$window",function(t,e){return{restrict:"A",templateUrl:function(t,e){return e&&e.hasOwnProperty("stackedTemplateUrl")&&""!==e.stackedTemplateUrl?e.stackedTemplateUrl:"/modules/ckc-angularjs-stacked/views/sample_stacked.html"},scope:{stacked_items:"=stackedItems"},link:function(t,e,s){!s.hasOwnProperty("stackedSort")||s.hasOwnProperty("stackedSort")&&""==s.stackedSort?t.stacked_sort="$index":t.stacked_sort=s.stackedSort,!s.hasOwnProperty("stackedSortDirection")||s.hasOwnProperty("stackedSortDirection")&&""==s.stackedSortDirection?t.stacked_sort_direction="desc":t.stacked_sort_direction=s.stackedSortDirection,!s.hasOwnProperty("stackedMinWidth")||s.hasOwnProperty("stackedMinWidth")&&""==s.stackedMinWidth?t.stacked_min_width=200:t.stacked_min_width=s.stackedMinWidth,!s.hasOwnProperty("stackedMaxWidth")||s.hasOwnProperty("stackedMaxWidth")&&""==s.stackedMaxWidth?t.stacked_max_width=400:t.stacked_max_width=s.stackedMaxWidth,!s.hasOwnProperty("stackedSmart")||s.hasOwnProperty("stackedSmart")&&""==s.stackedMaxWidth?t.stacked_smart=!1:t.stacked_smart=s.stackedSmart;var a=null,r=0,d=function(){return Math.floor(e.width()/((parseInt(t.stacked_max_width)+parseInt(t.stacked_min_width))/2))},c=function(t){return"Invalid Date"!==new Date(t)&&!isNaN(new Date(t))},i=function(){var e=[],s=t.stacked_sort,a=t.stacked_sort_direction;if("object"==typeof t.stacked_items)for(var r in t.stacked_items)e.push(t.stacked_items[r]);else for(var d=0;d<t.stacked_items.length;d++)e.push(t.stacked_items[d]);return"$index"!==s&&e.sort(function(t,e){if(t.hasOwnProperty(s)&&e.hasOwnProperty(s)){var r,d;if(c(t[s])&&c(e[s]))r=new Date(t[s]),d=new Date(e[s]);else if(isNaN(parseInt(t[s]))||isNaN(parseInt(e[s]))){if("string"!=typeof t[s]||"string"!=typeof e[s])return 0;r=t[s].split("")[0],d=e[s].split("")[0]}else r=parseInt(t[s]),d=parseInt(e[s]);return"desc"==a?r>d?1:-1:d>r?1:-1}return 0}),e},n=function(){if(t.stacked_items){a=i(),console.log(a),r=d(),t.stacked_columns=[];var e=0;0==r&&(r=1);for(var s=0;r>s;s++)t.stacked_columns.push([]);for(var c=0;c<a.length;c++)t.stacked_columns[e].push(a[c]),e==r-1?e=0:0==e?e++:e++}};s.$observe("stackedMaxWidth",function(e){!s.hasOwnProperty("stackedMaxWidth")||s.hasOwnProperty("stackedMaxWidth")&&""==s.stackedMaxWidth?t.stacked_max_width=400:t.stacked_max_width=s.stackedMaxWidth,n()}),s.$observe("stackedMinWidth",function(e){!s.hasOwnProperty("stackedMinWidth")||s.hasOwnProperty("stackedMinWidth")&&""==s.stackedMinWidth?t.stacked_min_width=400:t.stacked_min_width=s.stackedMinWidth,n()}),s.$observe("stackedSortDirection",function(e){!s.hasOwnProperty("stackedSortDirection")||s.hasOwnProperty("stacked")&&""==s.stackedSortDirection?t.stacked_sort_direction="desc":t.stacked_sort_direction=s.stackedSortDirection,n()}),s.$observe("stackedSort",function(e){!s.hasOwnProperty("stackedSort")||s.hasOwnProperty("stackedSort")&&""==s.stackedSort?t.stacked_sort=400:t.stacked_sort=s.stackedSort,n()}),t.$watch(function(){return e.width()},function(t){t&&n()},!0),n()}}}]);
//# sourceMappingURL=stacked.min.js.map