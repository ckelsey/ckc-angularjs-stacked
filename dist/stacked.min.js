"use strict";angular.module("ckc-stacked",[]).controller("StackedCtlr",["StackedS",function(t){this.StackedS=t}]).service("StackedS",[function(){var t={stacked_columns:[],update:function(e){return angular.copy(e,t.stacked_columns),t.stacked_columns}};return t}]).directive("stacked",["$timeout","$compile",function(t,e){return{restrict:"A",scope:{ngModel:"="},controller:"StackedCtlr",controllerAs:"ctlr",templateUrl:function(t,e){return e&&e.hasOwnProperty("stackedTemplateUrl")&&""!==e.stackedTemplateUrl?e.stackedTemplateUrl:"/bower_components/ckc-angularjs-stacked/views/sample_stacked.html"},link:function(e,r,a,n){var s=e.ngModel,c=[];if(!a.hasOwnProperty("stackedSort")||a.hasOwnProperty("stackedSort")&&""==a.stackedSort)var o="$index";else var o=a.stackedSort;if(!a.hasOwnProperty("stackedSortDirection")||a.hasOwnProperty("stackedSortDirection")&&""==a.stackedSortDirection)var i="desc";else var i=a.stackedSortDirection;if(!a.hasOwnProperty("stackedMinWidth")||a.hasOwnProperty("stackedMinWidth")&&""==a.stackedMinWidth)var d=200;else var d=a.stackedMinWidth;if(!a.hasOwnProperty("stackedMaxWidth")||a.hasOwnProperty("stackedMaxWidth")&&""==a.stackedMaxWidth)var k=400;else var k=a.stackedMaxWidth;if(!a.hasOwnProperty("stackedSmart")||a.hasOwnProperty("stackedSmart")&&""==a.stackedMaxWidth);else{a.stackedSmart}var l=null,h=function(){return Math.floor(r.width()/((parseInt(k)+parseInt(d))/2))},u=function(t){return"Invalid Date"!==new Date(t)&&!isNaN(new Date(t))},p=function(){var t=[],e=o,r=i;if("object"==typeof s)for(var a in s)t.push(s[a]);else for(var n=0;n<s.length;n++)t.push(s[n]);return"$index"!==e&&t.sort(function(t,a){if(t.hasOwnProperty(e)&&a.hasOwnProperty(e)){var n,s;if(u(t[e])&&u(a[e]))n=new Date(t[e]),s=new Date(a[e]);else if(isNaN(parseInt(t[e]))||isNaN(parseInt(a[e]))){if("string"!=typeof t[e]||"string"!=typeof a[e])return 0;n=t[e].split("")[0],s=a[e].split("")[0]}else n=parseInt(t[e]),s=parseInt(a[e]);return"desc"==r?n>s?1:-1:s>n?1:-1}return 0}),t},f=function(){if(void 0!==s){l=p();var e=h();c=[];var r=0;0==e&&(e=1);for(var a=0;e>a;a++)c.push([]);for(var o=0;o<l.length;o++)c[r].push(l[o]),r==e-1?r=0:0==r?r++:r++;t(function(){n.StackedS.update(c);for(var t=document.querySelectorAll(".stacked_column"),r=0;r<t.length;r++)t[r].style.width=100/e+"%"},100)}};a.$observe("stackedMaxWidth",function(t){k=!a.hasOwnProperty("stackedMaxWidth")||a.hasOwnProperty("stackedMaxWidth")&&""==a.stackedMaxWidth?400:a.stackedMaxWidth,f()}),a.$observe("stackedMinWidth",function(t){d=!a.hasOwnProperty("stackedMinWidth")||a.hasOwnProperty("stackedMinWidth")&&""==a.stackedMinWidth?400:a.stackedMinWidth,f()}),a.$observe("stackedSortDirection",function(t){i=!a.hasOwnProperty("stackedSortDirection")||a.hasOwnProperty("stacked")&&""==a.stackedSortDirection?"desc":a.stackedSortDirection,f()}),a.$observe("stackedSort",function(t){o=!a.hasOwnProperty("stackedSort")||a.hasOwnProperty("stackedSort")&&""==a.stackedSort?400:a.stackedSort,f()});var v,w=e.$watch("ngModel",function(t){if(s=t,null!==t&&void 0!==t){var e=Object.keys(s);e.length>0&&(f(),w())}return t},function(t){}),S=function(){f()};window.onresize=function(){clearTimeout(v),v=setTimeout(S,100)},f()}}}]);
//# sourceMappingURL=stacked.min.js.map