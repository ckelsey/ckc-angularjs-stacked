"use strict";angular.module("ckc-stacked",[]).controller("StackedCtlr",["StackedS",function(t){this.StackedS=t}]).service("StackedS",[function(){var t={stacked_columns:[]};return t}]).directive("stacked",["$timeout","$window","StackedS",function(t,e,r){return{restrict:"A",controller:"StackedCtlr",controllerAs:"ctlr",templateUrl:function(t,e){return e&&e.hasOwnProperty("stackedTemplateUrl")&&""!==e.stackedTemplateUrl?e.stackedTemplateUrl:"/bower_components/ckc-angularjs-stacked/views/sample_stacked.html"},link:function(t,e,a){var s=a.stackedItems,n=[];if(!a.hasOwnProperty("stackedSort")||a.hasOwnProperty("stackedSort")&&""==a.stackedSort)var c="$index";else var c=a.stackedSort;if(!a.hasOwnProperty("stackedSortDirection")||a.hasOwnProperty("stackedSortDirection")&&""==a.stackedSortDirection)var o="desc";else var o=a.stackedSortDirection;if(!a.hasOwnProperty("stackedMinWidth")||a.hasOwnProperty("stackedMinWidth")&&""==a.stackedMinWidth)var i=200;else var i=a.stackedMinWidth;if(!a.hasOwnProperty("stackedMaxWidth")||a.hasOwnProperty("stackedMaxWidth")&&""==a.stackedMaxWidth)var d=400;else var d=a.stackedMaxWidth;if(!a.hasOwnProperty("stackedSmart")||a.hasOwnProperty("stackedSmart")&&""==a.stackedMaxWidth);else{a.stackedSmart}var k=null,h=0,l=function(){return Math.floor(e.width()/((parseInt(d)+parseInt(i))/2))},p=function(t){return"Invalid Date"!==new Date(t)&&!isNaN(new Date(t))},u=function(){var t=[],e=c,r=o;if("object"==typeof s)for(var a in s)t.push(s[a]);else for(var n=0;n<s.length;n++)t.push(s[n]);return"$index"!==e&&t.sort(function(t,a){if(t.hasOwnProperty(e)&&a.hasOwnProperty(e)){var s,n;if(p(t[e])&&p(a[e]))s=new Date(t[e]),n=new Date(a[e]);else if(isNaN(parseInt(t[e]))||isNaN(parseInt(a[e]))){if("string"!=typeof t[e]||"string"!=typeof a[e])return 0;s=t[e].split("")[0],n=a[e].split("")[0]}else s=parseInt(t[e]),n=parseInt(a[e]);return"desc"==r?s>n?1:-1:n>s?1:-1}return 0}),t},f=function(){if(void 0!==s){k=u(),h=l(),n=[];var t=0;0==h&&(h=1);for(var e=0;h>e;e++)n.push([]);for(var a=0;a<k.length;a++)n[t].push(k[a]),t==h-1?t=0:0==t?t++:t++;r.stacked_columns=n;for(var c=document.querySelectorAll(".stacked_column"),o=0;o<c.length;o++)c[o].style.width=100/h+"%"}};a.$observe("stackedItems",function(t){s=JSON.parse(a.stackedItems),f()}),a.$observe("stackedMaxWidth",function(t){d=!a.hasOwnProperty("stackedMaxWidth")||a.hasOwnProperty("stackedMaxWidth")&&""==a.stackedMaxWidth?400:a.stackedMaxWidth,f()}),a.$observe("stackedMinWidth",function(t){i=!a.hasOwnProperty("stackedMinWidth")||a.hasOwnProperty("stackedMinWidth")&&""==a.stackedMinWidth?400:a.stackedMinWidth,f()}),a.$observe("stackedSortDirection",function(t){o=!a.hasOwnProperty("stackedSortDirection")||a.hasOwnProperty("stacked")&&""==a.stackedSortDirection?"desc":a.stackedSortDirection,f()}),a.$observe("stackedSort",function(t){c=!a.hasOwnProperty("stackedSort")||a.hasOwnProperty("stackedSort")&&""==a.stackedSort?400:a.stackedSort,f()});var w,S=function(){f()};window.onresize=function(){clearTimeout(w),w=setTimeout(S,100)},f()}}}]);
//# sourceMappingURL=stacked.min.js.map